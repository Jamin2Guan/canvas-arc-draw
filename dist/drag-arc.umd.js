!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("core-js/modules/es6.function.bind"),require("core-js/modules/es6.array.fill")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.function.bind","core-js/modules/es6.array.fill"],i):(t=t||self).dragArc=i()}(this,(function(){"use strict";var t=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")};function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var e=function(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t};return function(){function i(e){t(this,i),this.initParam(e),this.draw(this.value)}return e(i,[{key:"initParam",value:function(t){var i=t.el,e=t.startDeg,s=void 0===e?0:e,n=t.endDeg,h=void 0===n?1.8:n,o=t.innerColor,r=void 0===o?"#0078b4":o,c=t.outColor,a=void 0===c?"#c0c0c0":c,u=t.innerLineWidth,l=void 0===u?1:u,d=t.outLineWidth,v=void 0===d?20:d,f=t.counterclockwise,g=void 0===f||f,x=t.rotate,y=void 0===x?0:x,w=t.slider,k=void 0===w?10:w,M=t.color,b=void 0===M?"":M,P=t.sliderColor,D=void 0===P?"#fff":P,p=t.sliderBorderColor,C=void 0===p?"#f15a4a":p,m=t.value,I=void 0===m?0:m,O=t.change,T=void 0===O?function(t){console.log(t)}:O;this.el=i,this.width=i.offsetWidth,this.height=i.offsetHeight,this.center=this.width/2,this.radius=this.width/3,this.initCanvas(i),this.startDeg=s,this.endDeg=h,this.innerColor=r,this.outColor=a,this.innerLineWidth=l,this.outLineWidth=v,this.counterclockwise=g,this.rotate=y,this.slider=k,this.color=b,this.sliderColor=D,this.sliderBorderColor=C,this.value=I,this.change=T,this.isDown=!1,this.event(i)}},{key:"initCanvas",value:function(t){this.canvas=document.createElement("canvas"),this.canvas.setAttribute("id","dragArc"),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.width),t.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.isMobile=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}},{key:"draw",value:function(t){this.ctx.clearRect(0,0,this.width,this.width),this.ctx.save();var i=this.counterclockwise?Math.PI*(2-this.startDeg):Math.PI*this.startDeg,e=this.counterclockwise?Math.PI*(2-this.endDeg):Math.PI*this.endDeg;this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.arc(this.center,this.center,this.radius-20,i,e,this.counterclockwise),this.ctx.strokeStyle=this.innerColor,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(this.center,this.center,this.radius,i,e,this.counterclockwise),this.ctx.strokeStyle=this.outColor,this.ctx.lineCap="round",this.ctx.lineWidth=20,this.ctx.stroke();var s=this.valToDeg(t);this.ctx.beginPath(),this.ctx.arc(this.center,this.center,this.radius,i,s,this.counterclockwise),this.ctx.strokeStyle="#f15a4a",this.ctx.lineCap="round",this.ctx.lineWidth=20,this.ctx.stroke(),this.P=this.DegToXY(s),this.ctx.beginPath(),this.ctx.moveTo(200,200),this.ctx.arc(this.P.x,this.P.y,this.slider+5,0,2*Math.PI,!1),this.ctx.fillStyle=this.sliderBorderColor,this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(200,200),this.ctx.arc(this.P.x,this.P.y,this.slider,0,2*Math.PI,!1),this.ctx.fillStyle=this.sliderColor,this.ctx.fill()}},{key:"valToDeg",value:function(t){var i=(this.endDeg-this.startDeg)/100*t;return this.counterclockwise&&0!=i&&(i=2-i),((this.counterclockwise?2-this.startDeg:this.startDeg)+i)*Math.PI}},{key:"DegToXY",value:function(t){var i=2*Math.PI-t;return this.respotchangeXY({x:this.radius*Math.cos(i),y:this.radius*Math.sin(i)})}},{key:"spotchangeXY",value:function(t){var i,e=this;return{x:(i=t.x,i-e.center),y:function(t){return e.center-t}(t.y)}}},{key:"respotchangeXY",value:function(t){var i,e=this;return{x:(i=t.x,i+e.center),y:function(t){return e.center-t}(t.y)}}},{key:"event",value:function(t){if(this.isMobile)return t.addEventListener("touchstart",this.OnMouseDown.bind(this),!1),t.addEventListener("touchmove",this.debounce(this.OnMouseMove.bind(this)),!1),void t.addEventListener("touchend",this.OnMouseUp.bind(this),!1);t.addEventListener("mousedown",this.OnMouseDown.bind(this),!1),t.addEventListener("mousemove",this.debounce(this.OnMouseMove.bind(this)),!1),t.addEventListener("mouseup",this.OnMouseUp.bind(this),!1)}},{key:"OnMouseMove",value:function(t){if(this.isDown){var i={};i.x=this.getx(t),i.y=this.gety(t);var e=this.spotchangeXY(i),s=this.XYToDeg(e.x,e.y),n=((s=this.counterclockwise?s:2*Math.PI-s)/Math.PI-this.startDeg)/(this.endDeg-this.startDeg)*100;n>100||n<0||Math.abs(n-this.value)>10||(this.value=n,this.draw(n),this.change(n))}}},{key:"OnMouseDown",value:function(t){console.log("down");var i=this.getx(t),e=this.gety(t),s=this.P,n=s.x-this.slider,h=s.x+this.slider,o=s.y-this.slider,r=s.y+this.slider;this.isDown=n<i&&i<h&&o<e&&e<r}},{key:"OnMouseUp",value:function(){this.isDown=!1}},{key:"XYToDeg",value:function(t,i){var e,s=Math.atan(i/t);return t>=0&&i>=0&&(e=s),t<=0&&i>=0&&(e=s+Math.PI),t<=0&&i<=0&&(e=s+Math.PI),t>0&&i<0&&(e=s+2*Math.PI),e}},{key:"getx",value:function(t){return this.isMobile?t.touches[0].pageX-this.el.getBoundingClientRect().left:t.clientX-this.el.getBoundingClientRect().left}},{key:"gety",value:function(t){return this.isMobile?t.touches[0].pageY-this.el.getBoundingClientRect().top:t.clientY-this.el.getBoundingClientRect().top}},{key:"debounce",value:function(t){var i;return function(){var e=this,s=arguments;i&&clearTimeout(i),i=setTimeout((function(){t.apply(e,s)}),10)}}}]),i}()}));
